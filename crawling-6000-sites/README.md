:warning: Порой темные электрические силы мешают GitHub корректно отображать файлы формата `ipynb`. Если такое случилось и в этот раз, то можно просмотреть код проекта в nbviewer.jupyter.org по [этой ссылке](https://nbviewer.jupyter.org/github/konstantin-samsonov/various_pieces/blob/master/crawling-6000-sites/parser.ipynb) 

# Анализ популярности языков в категории сайтов

## Задача
Понять на каких языках публикуется контент в определенной категории по сегментации SimilarWeb. Ожидается, что самым популярным языком окажется английский, но вот как будут располагаться остальные это пока загадка. 


## Описание данных
- `6609` доменов в csv-файле 

## Структура проекта и решение задачи
В данном случае структура весьма простая, а вот реализация вызвала приличное количество вопросов. 

Первая версия обладала уникальными особенностями:
- падала при появлении любой новой ошибки (долгий пинг, https вместо http и так далее)
- обработка сайтов проходила в один поток и общее время сбора информации превысило `2.5 часа`, как-то это не очень быстро ( 
- данные собирались в словарь который потом нужно было руками перегонять в DataFrame и проводить дополнительные манипуляции прежде чем заняться непосредственным анализом.
- прогессбар для отслеживания работы 

Живущий во мне перфекционист не смог смириться с такой плохой функциональностью. Поэтому на следующий день все было переделано и текущая версия обзавелась следующими возможностями:
- устойчивость к появлению новых ошибок и внезапностей
- многопоточность (100 потоков) которая позволила выполнить задачу за `9 минут` и `59 секунд`
- сбор необходимой информации сразу в DataFrame
- прогессбар для отслеживания работы 

Данная версия (как и я) пока не умеет работать с динамическими сайтами. Доля таких сайтов в предоставленном наборе достаточно высока и составляет `16%`. Так как прямо сейчас нет цели постоянно парсить данную категорию, то вопрос решил восстановлением языков по доменам сайта (en, fr, ja, … - достаточно хорошо говорят о языке который будет доминировать на ресурсе)

## Итоговый вывод
- Абсолютное лидерство английского языка не стало каким-то откровением. Данный результат был вполне ожидаем. Важнее было понять какие языки будут идти сразу за ним. И здесь лидерами стали `ja`, `fr`, `de`.  Стоит отметить, что в данных SimilarWeb совершенно не было сайтов из Китая. Скорее всего это объясняется всем известной изолированностью китайского интернета. 
- Необходимо освоить парсинг сайтов с динамической генерацией контента, пригодится.